<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystalline - Uncensored Truth Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #141922;
            --bg-card: #1a1f2e;
            --accent-cyan: #00d9ff;
            --accent-purple: #a855f7;
            --accent-green: #10b981;
            --accent-red: #ef4444;
            --accent-amber: #f59e0b;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Mono', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            pointer-events: none;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, var(--accent-cyan) 2px, var(--accent-cyan) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, var(--accent-cyan) 2px, var(--accent-cyan) 4px);
            background-size: 50px 50px;
            animation: scroll-bg 20s linear infinite;
        }

        @keyframes scroll-bg {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            color: white;
            box-shadow: 0 4px 20px rgba(0, 217, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(0, 217, 255, 0.5);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--accent-cyan);
            background: rgba(0, 217, 255, 0.1);
        }

        /* Main Container */
        .container {
            max-width: 600px;
            margin: 80px auto 0;
            padding: 2rem 1rem;
        }

        /* Feed */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Post Card */
        .post {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .post:hover {
            transform: translateY(-4px);
            border-color: var(--accent-cyan);
            box-shadow: 0 20px 40px rgba(0, 217, 255, 0.2);
        }

        .post-header {
            padding: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: start;
            border-bottom: 1px solid var(--border);
        }

        .post-author {
            display: flex;
            gap: 0.8rem;
            align-items: center;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
        }

        .author-info {
            display: flex;
            flex-direction: column;
        }

        .author-name {
            font-weight: 500;
            color: var(--text-primary);
        }

        .post-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Transparency Labels */
        .labels {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .label {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .label-verified {
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-green);
            border: 1px solid var(--accent-green);
        }

        .label-community {
            background: rgba(0, 217, 255, 0.2);
            color: var(--accent-cyan);
            border: 1px solid var(--accent-cyan);
        }

        .label-review {
            background: rgba(245, 158, 11, 0.2);
            color: var(--accent-amber);
            border: 1px solid var(--accent-amber);
        }

        .label-ai {
            background: rgba(168, 85, 247, 0.2);
            color: var(--accent-purple);
            border: 1px solid var(--accent-purple);
        }

        /* Post Content */
        .post-content {
            padding: 1.5rem;
        }

        .post-category {
            display: inline-block;
            padding: 0.4rem 0.8rem;
            background: rgba(0, 217, 255, 0.1);
            color: var(--accent-cyan);
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        .post-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        .post-text {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .post-media {
            margin-top: 1rem;
            border-radius: 8px;
            overflow: hidden;
        }

        .post-media img {
            width: 100%;
            display: block;
        }

        .video-placeholder {
            width: 100%;
            aspect-ratio: 16/9;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Post Actions */
        .post-actions {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .voting {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .vote-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-secondary);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid var(--border);
        }

        .vote-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s;
            padding: 0.2rem;
        }

        .vote-btn:hover {
            transform: scale(1.2);
        }

        .vote-btn.upvote:hover {
            color: var(--accent-green);
        }

        .vote-btn.downvote:hover {
            color: var(--accent-red);
        }

        .vote-count {
            font-weight: 500;
            min-width: 30px;
            text-align: center;
        }

        .authenticity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border-radius: 25px;
            border: 1px solid var(--border);
            font-size: 0.85rem;
        }

        .authenticity-score {
            font-weight: 700;
            color: var(--accent-cyan);
        }

        /* Create Post Button */
        .create-post-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border: none;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            box-shadow: 0 10px 40px rgba(0, 217, 255, 0.4);
            transition: all 0.3s ease;
            z-index: 50;
        }

        .create-post-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 15px 50px rgba(0, 217, 255, 0.6);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-btn:hover {
            color: var(--accent-red);
            transform: rotate(90deg);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.8rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(0, 217, 255, 0.1);
        }

        .form-textarea {
            min-height: 150px;
            resize: vertical;
        }

        .file-upload {
            border: 2px dashed var(--border);
            padding: 2rem;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload:hover {
            border-color: var(--accent-cyan);
            background: rgba(0, 217, 255, 0.05);
        }

        .file-upload input {
            display: none;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--accent-cyan);
        }

        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }

            .logo {
                font-size: 1.2rem;
            }

            .container {
                padding: 1rem;
            }

            .post-title {
                font-size: 1.1rem;
            }

            .create-post-btn {
                bottom: 1rem;
                right: 1rem;
            }

            .profile-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>

    <header>
        <div class="logo" onclick="location.reload()">‚óà CRYSTALLINE</div>
        <div class="header-actions">
            <button class="btn btn-secondary">Explore</button>
            <div class="user-avatar" onclick="openProfile()">TS</div>
        </div>
    </header>

    <div class="container">
        <div class="feed" id="feed">
            <!-- Posts will be inserted here -->
        </div>
    </div>

    <button class="create-post-btn" onclick="openModal('create')">+</button>

    <!-- Create Post Modal -->
    <div class="modal" id="createModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Share Truth</h2>
                <button class="close-btn" onclick="closeModal('create')">&times;</button>
            </div>

            <form id="createPostForm">
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="category" required>
                        <option value="">Select a category</option>
                        <option value="government">Government & Politics</option>
                        <option value="health">Health & Medicine</option>
                        <option value="technology">Technology</option>
                        <option value="history">Hidden History</option>
                        <option value="finance">Finance & Economy</option>
                        <option value="environment">Environment</option>
                        <option value="media">Media & Censorship</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-input" id="title" placeholder="What's the truth you're sharing?" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea class="form-textarea" id="content" placeholder="Share your knowledge, evidence, or perspective..." required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Media (Optional)</label>
                    <div class="file-upload" onclick="document.getElementById('mediaUpload').click()">
                        <input type="file" id="mediaUpload" accept="image/*,video/*" onchange="handleFileUpload(event)">
                        <div id="uploadText">üìÅ Click to upload image or video</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">
                            AI detection will be performed on uploads
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Source Links (Optional)</label>
                    <input type="url" class="form-input" id="sources" placeholder="https://...">
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="originalContent" required>
                        <label for="originalContent">I certify this is original content or properly attributed</label>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                    Publish to Network
                </button>
            </form>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Profile</h2>
                <button class="close-btn" onclick="closeModal('profile')">&times;</button>
            </div>

            <div class="profile-content">
                <div class="profile-avatar">TS</div>
                <h2 class="profile-name">TruthSeeker_42</h2>
                <p class="profile-bio">Seeking truth in a world of deception. Verified researcher and fact-checker.</p>

                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="stat-value">127</div>
                        <div class="stat-label">Posts</div>
                    </div>
                    <div class="profile-stat">
                        <div class="stat-value">94.2%</div>
                        <div class="stat-label">Avg Truth Score</div>
                    </div>
                    <div class="profile-stat">
                        <div class="stat-value">15.8k</div>
                        <div class="stat-label">Impact</div>
                    </div>
                </div>

                <div class="profile-badges">
                    <div class="badge">
                        <span>‚úì</span>
                        <span>Verified Researcher</span>
                    </div>
                    <div class="badge">
                        <span>‚óà</span>
                        <span>Crystal Tier 3</span>
                    </div>
                    <div class="badge">
                        <span>üîç</span>
                        <span>Fact Checker</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample posts data
        const samplePosts = [
            {
                id: 1,
                author: "TruthSeeker_42",
                avatar: "TS",
                time: "2h ago",
                posts: 127,
                truthScore: 94.2,
                category: "technology",
                title: "The Real Story Behind Social Media Algorithms",
                content: "Major social platforms aren't just showing you content randomly. Documents leaked from internal meetings reveal deliberate engagement manipulation to maximize ad revenue. Here's what they don't want you to know...",
                votes: 847,
                authenticity: 94,
                hasVideo: false,
                videoUrl: null
            },
            {
                id: 2,
                author: "DataDiver",
                avatar: "DD",
                time: "5h ago",
                posts: 89,
                truthScore: 96.5,
                category: "government",
                title: "Declassified Documents Reveal Surveillance Expansion",
                content: "Recently declassified NSA documents show surveillance programs expanded far beyond what was publicly disclosed. This isn't conspiracy theory - these are official government records now available through FOIA requests.",
                votes: 1203,
                authenticity: 97,
                hasVideo: true,
                videoUrl: "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"
            },
            {
                id: 3,
                author: "HealthWatch",
                avatar: "HW",
                time: "8h ago",
                posts: 64,
                truthScore: 88.3,
                category: "health",
                title: "Pharmaceutical Pricing: The Hidden Markup",
                content: "Analysis of Medicare data reveals certain medications marked up over 1000% from production cost. Here's the breakdown with sources from government databases...",
                votes: 621,
                authenticity: 89,
                hasVideo: false,
                videoUrl: null
            },
            {
                id: 4,
                author: "HistoryUncovered",
                avatar: "HU",
                time: "12h ago",
                posts: 156,
                truthScore: 91.7,
                category: "history",
                title: "Operation Northwoods: Declassified False Flag Plans",
                content: "Declassified documents from 1962 show the Joint Chiefs of Staff proposed false flag attacks on US citizens to justify war with Cuba. This is not conspiracy - it's documented history available in the National Archives.",
                votes: 1456,
                authenticity: 98,
                hasVideo: false,
                videoUrl: null
            },
            {
                id: 5,
                author: "FinanceWatch",
                avatar: "FW",
                time: "1d ago",
                posts: 43,
                truthScore: 72.1,
                category: "finance",
                title: "Central Bank Digital Currencies: What They're Not Telling You",
                content: "Multiple central banks are developing digital currencies that could enable unprecedented financial surveillance. While sold as 'innovation,' leaked documents suggest programmable money with expiration dates and restricted spending...",
                votes: 234,
                authenticity: 68,
                hasVideo: true,
                videoUrl: "https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4"
            },
            {
                id: 6,
                author: "MediaAnalyst",
                avatar: "MA",
                time: "1d ago",
                posts: 201,
                truthScore: 45.2,
                category: "media",
                title: "Aliens Built the Pyramids with Sound Waves",
                content: "Ancient aliens used advanced sound technology to levitate massive stone blocks. This explains everything about the pyramids that mainstream archaeology can't answer!!!",
                votes: -87,
                authenticity: 12,
                hasVideo: false,
                videoUrl: null
            }
        ];

        let uploadedFile = null;

        function getAuthenticityLevel(score) {
            if (score >= 85) return 'high';
            if (score >= 60) return 'medium';
            return 'low';
        }

        function renderPosts() {
            const feed = document.getElementById('feed');
            feed.innerHTML = samplePosts.map(post => {
                const authLevel = getAuthenticityLevel(post.authenticity);
                const categoryClass = `category-${post.category}`;
                
                return `
                <div class="post" data-authenticity="${authLevel}">
                    <div class="crystal-border"></div>
                    <div class="crystal-facets"></div>
                    ${authLevel === 'high' ? `
                        <div class="sparkle"></div>
                        <div class="sparkle"></div>
                        <div class="sparkle"></div>
                        <div class="sparkle"></div>
                    ` : ''}
                    
                    <div class="post-header">
                        <div class="post-author" onclick="openProfile()">
                            <div class="avatar">${post.avatar}</div>
                            <div class="author-info">
                                <div class="author-name">${post.author}</div>
                                <div class="author-stats">
                                    <span class="stat">üìù ${post.posts} posts</span>
                                    <span class="stat">‚óà ${post.truthScore}% truth</span>
                                </div>
                            </div>
                        </div>
                        <div class="post-time">${post.time}</div>
                    </div>
                    
                    <div class="post-content">
                        <span class="category-crystal ${categoryClass}">
                            ${post.category === 'government' ? 'üèõÔ∏è' : 
                              post.category === 'health' ? '‚öïÔ∏è' : 
                              post.category === 'technology' ? 'üíª' : 
                              post.category === 'history' ? 'üìú' : 
                              post.category === 'finance' ? 'üí∞' : 
                              post.category === 'media' ? 'üì°' : 'üîç'}
                            ${post.category}
                        </span>
                        <h3 class="post-title">${post.title}</h3>
                        <p class="post-text">${post.content}</p>
                        
                        ${post.hasVideo ? `
                            <div class="video-container">
                                <video class="video-player" id="video-${post.id}">
                                    <source src="${post.videoUrl}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div class="video-controls">
                                    <button class="play-btn" onclick="togglePlay(${post.id})">‚ñ∂</button>
                                    <div class="progress-bar" onclick="seek(event, ${post.id})">
                                        <div class="progress-fill" id="progress-${post.id}"></div>
                                    </div>
                                    <span class="time-display" id="time-${post.id}">0:00 / 0:00</span>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="authenticity-display">
                        <div class="authenticity-meter">
                            <div class="authenticity-fill ${authLevel}" style="width: ${post.authenticity}%"></div>
                        </div>
                        <div class="authenticity-label ${authLevel}">
                            ${authLevel === 'high' ? '‚ú®' : authLevel === 'medium' ? '‚ö†Ô∏è' : 'üíî'}
                            <span class="authenticity-score">${post.authenticity}%</span>
                            <span>${authLevel === 'high' ? 'Verified' : authLevel === 'medium' ? 'Review' : 'Debunked'}</span>
                        </div>
                    </div>
                    
                    <div class="post-actions">
                        <div class="voting">
                            <div class="vote-group">
                                <button class="vote-btn upvote" onclick="vote(${post.id}, 1)">‚ñ≤</button>
                                <span class="vote-count" id="votes-${post.id}">${post.votes}</span>
                                <button class="vote-btn downvote" onclick="vote(${post.id}, -1)">‚ñº</button>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="action-btn" title="Share">üîó</button>
                            <button class="action-btn" title="Report">‚ö†Ô∏è</button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');

            // Initialize video players
            samplePosts.forEach(post => {
                if (post.hasVideo) {
                    const video = document.getElementById(`video-${post.id}`);
                    if (video) {
                        video.addEventListener('timeupdate', () => updateProgress(post.id));
                        video.addEventListener('loadedmetadata', () => updateTime(post.id));
                    }
                }
            });
        }

        function vote(postId, direction) {
            const voteElement = document.getElementById(`votes-${postId}`);
            const currentVotes = parseInt(voteElement.textContent);
            voteElement.textContent = currentVotes + direction;
            
            voteElement.style.transform = 'scale(1.3)';
            voteElement.style.color = direction > 0 ? 'var(--accent-green)' : 'var(--accent-red)';
            setTimeout(() => {
                voteElement.style.transform = 'scale(1)';
                voteElement.style.color = '';
            }, 300);
        }

        function togglePlay(postId) {
            const video = document.getElementById(`video-${postId}`);
            const btn = event.target;
            
            if (video.paused) {
                video.play();
                btn.textContent = '‚è∏';
            } else {
                video.pause();
                btn.textContent = '‚ñ∂';
            }
        }

        function updateProgress(postId) {
            const video = document.getElementById(`video-${postId}`);
            const progress = document.getElementById(`progress-${postId}`);
            
            if (video && progress) {
                const percentage = (video.currentTime / video.duration) * 100;
                progress.style.width = percentage + '%';
                updateTime(postId);
            }
        }

        function updateTime(postId) {
            const video = document.getElementById(`video-${postId}`);
            const timeDisplay = document.getElementById(`time-${postId}`);
            
            if (video && timeDisplay) {
                const current = formatTime(video.currentTime);
                const duration = formatTime(video.duration);
                timeDisplay.textContent = `${current} / ${duration}`;
            }
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function seek(event, postId) {
            const progressBar = event.currentTarget;
            const video = document.getElementById(`video-${postId}`);
            
            if (video) {
                const rect = progressBar.getBoundingClientRect();
                const pos = (event.clientX - rect.left) / rect.width;
                video.currentTime = pos * video.duration;
            }
        }

        function openModal(type) {
            if (type === 'create') {
                document.getElementById('createModal').classList.add('active');
            } else if (type === 'profile') {
                document.getElementById('profileModal').classList.add('active');
            }
        }

        function closeModal(type) {
            if (type === 'create') {
                document.getElementById('createModal').classList.remove('active');
                document.getElementById('createPostForm').reset();
                uploadedFile = null;
                document.getElementById('uploadText').textContent = 'üìÅ Click to upload image or video';
            } else if (type === 'profile') {
                document.getElementById('profileModal').classList.remove('active');
            }
        }

        function openProfile() {
            openModal('profile');
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                uploadedFile = file;
                const fileName = file.name.length > 30 ? file.name.substring(0, 27) + '...' : file.name;
                document.getElementById('uploadText').innerHTML = `
                    ‚úì ${fileName}<br>
                    <small style="color: var(--accent-green);">AI detection will run on publish</small>
                `;
            }
        }

        document.getElementById('createPostForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newPost = {
                id: Date.now(),
                author: "TruthSeeker_42",
                avatar: "TS",
                time: "Just now",
                posts: 128,
                truthScore: 94.2,
                category: document.getElementById('category').value,
                title: document.getElementById('title').value,
                content: document.getElementById('content').value,
                votes: 0,
                authenticity: 0,
                hasVideo: uploadedFile && uploadedFile.type.startsWith('video/'),
                videoUrl: null
            };
            
            samplePosts.unshift(newPost);
            renderPosts();
            closeModal('create');
            
            alert('‚ú® Your post has been submitted!\n\nüîç AI detection running...\n‚óà Community verification pending...\n\nYour crystal will brighten as verification completes!');
        });

        // Close modals when clicking outside
        document.getElementById('createModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal('create');
        });

        document.getElementById('profileModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal('profile');
        });

        // Initialize
        renderPosts();
    </script>
</body>
</html>
        }

        .file-upload {
            border: 2px dashed var(--border);
            padding: 2rem;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .file-upload:hover {
            border-color: var(--accent-cyan);
            background: rgba(0, 217, 255, 0.05);
        }

        .file-upload input {
            display: none;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--accent-cyan);
        }

        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }

            .logo {
                font-size: 1.2rem;
            }

            .container {
                padding: 1rem;
            }

            .post-title {
                font-size: 1.1rem;
            }

            .create-post-btn {
                bottom: 1rem;
                right: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>

    <header>
        <div class="logo">‚óà CRYSTALLINE</div>
        <div class="header-actions">
            <button class="btn btn-secondary">Explore</button>
            <button class="btn btn-primary">Sign In</button>
        </div>
    </header>

    <div class="container">
        <div class="feed" id="feed">
            <!-- Posts will be inserted here -->
        </div>
    </div>

    <button class="create-post-btn" onclick="openModal()">+</button>

    <!-- Create Post Modal -->
    <div class="modal" id="createModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Share Truth</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>

            <form id="createPostForm">
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="category" required>
                        <option value="">Select a category</option>
                        <option value="government">Government & Politics</option>
                        <option value="health">Health & Medicine</option>
                        <option value="technology">Technology</option>
                        <option value="history">Hidden History</option>
                        <option value="finance">Finance & Economy</option>
                        <option value="environment">Environment</option>
                        <option value="media">Media & Censorship</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-input" id="title" placeholder="What's the truth you're sharing?" required>
                </div>

                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea class="form-textarea" id="content" placeholder="Share your knowledge, evidence, or perspective..." required></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Media (Optional)</label>
                    <div class="file-upload" onclick="document.getElementById('mediaUpload').click()">
                        <input type="file" id="mediaUpload" accept="image/*,video/*">
                        <div>üìÅ Click to upload image or video</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">
                            AI detection will be performed on uploads
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Source Links (Optional)</label>
                    <input type="url" class="form-input" id="sources" placeholder="https://...">
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="originalContent" required>
                        <label for="originalContent">I certify this is original content or properly attributed</label>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                    Publish to Network
                </button>
            </form>
        </div>
    </div>

    <script>
        // Sample posts data
        const samplePosts = [
            {
                id: 1,
                author: "TruthSeeker_42",
                avatar: "TS",
                time: "2h ago",
                category: "technology",
                title: "The Real Story Behind Social Media Algorithms",
                content: "Major social platforms aren't just showing you content randomly. Documents leaked from internal meetings reveal deliberate engagement manipulation to maximize ad revenue. Here's what they don't want you to know...",
                labels: ["verified", "community"],
                votes: 847,
                authenticity: 94,
                hasMedia: false
            },
            {
                id: 2,
                author: "DataDiver",
                avatar: "DD",
                time: "5h ago",
                category: "government",
                title: "Declassified Documents Reveal Surveillance Expansion",
                content: "Recently declassified NSA documents show surveillance programs expanded far beyond what was publicly disclosed. This isn't conspiracy theory - these are official government records now available through FOIA requests.",
                labels: ["verified", "community"],
                votes: 1203,
                authenticity: 97,
                hasMedia: true
            },
            {
                id: 3,
                author: "HealthWatch",
                avatar: "HW",
                time: "8h ago",
                category: "health",
                title: "Pharmaceutical Pricing: The Hidden Markup",
                content: "Analysis of Medicare data reveals certain medications marked up over 1000% from production cost. Here's the breakdown with sources from government databases...",
                labels: ["community", "review"],
                votes: 621,
                authenticity: 89,
                hasMedia: false
            }
        ];

        function renderPosts() {
            const feed = document.getElementById('feed');
            feed.innerHTML = samplePosts.map(post => `
                <div class="post">
                    <div class="post-header">
                        <div class="post-author">
                            <div class="avatar">${post.avatar}</div>
                            <div class="author-info">
                                <div class="author-name">${post.author}</div>
                                <div class="post-time">${post.time}</div>
                            </div>
                        </div>
                        <div class="labels">
                            ${post.labels.map(label => {
                                const labelClass = label === 'verified' ? 'label-verified' : 
                                                  label === 'community' ? 'label-community' : 
                                                  label === 'review' ? 'label-review' : 'label-ai';
                                const labelText = label === 'verified' ? '‚úì Verified' : 
                                                 label === 'community' ? '‚óà Community Verified' : 
                                                 label === 'review' ? '‚ö† Needs Review' : 'ü§ñ AI Detected';
                                return `<span class="label ${labelClass}">${labelText}</span>`;
                            }).join('')}
                        </div>
                    </div>
                    <div class="post-content">
                        <span class="post-category">${post.category}</span>
                        <h3 class="post-title">${post.title}</h3>
                        <p class="post-text">${post.content}</p>
                        ${post.hasMedia ? '<div class="post-media"><div class="video-placeholder">üìπ Video Content (Demo)</div></div>' : ''}
                    </div>
                    <div class="post-actions">
                        <div class="voting">
                            <div class="vote-group">
                                <button class="vote-btn upvote" onclick="vote(${post.id}, 1)">‚ñ≤</button>
                                <span class="vote-count" id="votes-${post.id}">${post.votes}</span>
                                <button class="vote-btn downvote" onclick="vote(${post.id}, -1)">‚ñº</button>
                            </div>
                        </div>
                        <div class="authenticity">
                            <span>Authenticity:</span>
                            <span class="authenticity-score">${post.authenticity}%</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function vote(postId, direction) {
            const voteElement = document.getElementById(`votes-${postId}`);
            const currentVotes = parseInt(voteElement.textContent);
            voteElement.textContent = currentVotes + direction;
            
            // Add visual feedback
            voteElement.style.transform = 'scale(1.2)';
            setTimeout(() => {
                voteElement.style.transform = 'scale(1)';
            }, 200);
        }

        function openModal() {
            document.getElementById('createModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('createModal').classList.remove('active');
            document.getElementById('createPostForm').reset();
        }

        document.getElementById('createPostForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const newPost = {
                id: Date.now(),
                author: "You",
                avatar: "YU",
                time: "Just now",
                category: document.getElementById('category').value,
                title: document.getElementById('title').value,
                content: document.getElementById('content').value,
                labels: ["review"],
                votes: 0,
                authenticity: 0,
                hasMedia: document.getElementById('mediaUpload').files.length > 0
            };
            
            samplePosts.unshift(newPost);
            renderPosts();
            closeModal();
            
            // Show success message
            alert('Your post has been submitted for AI detection and community verification!');
        });

        // Close modal when clicking outside
        document.getElementById('createModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Initialize
        renderPosts();
    </script>
</body>
</html>